# 自分だけのサーバーを作ろう

1. キーペアの作成
2. セキュリティグループの作成
3. EC2インスタンスの作成
4. EIPの確保とアタッチ
5. EBSストレージのアタッチ
6. インスタンスへのログイン

## キーペアの作成:
秘密鍵、公開鍵という2つの鍵を作っている
公開鍵をサーバーにセットする
サーバーに接続するときに秘密鍵を使う

サーバーに安全にログインするための鍵（カギと鍵穴）を準備する作業をしている

## セキュリティグループの作成
サーバーへのデータの通り道を管理・制限する防御壁（ファイアウォール）を設定すること
インバウンドルール：外部からサーバーに入ってくる通信を許可します。
インバウンドルールは、どの通信をサーバーに許可するかを決めるルール

具体的な設定項目

●プロトコル
通信の種類を指定します（例: TCP、UDP、ICMPなど）。
例: TCPはウェブやSSHの通信でよく使われます。
ポート番号

●どのサービスやアプリにアクセスするかを指定します。
例:
ポート22: SSH接続（サーバー管理用）
ポート80: HTTP（ウェブサイトの通信）
ポート443: HTTPS（暗号化されたウェブ通信）
送信元（Source）

●誰がアクセスしていいかを指定します。
例:
「0.0.0.0/0」: 全世界からのアクセスを許可。
「192.168.1.1/32」: 特定のIPアドレスのみ許可。

## EC2インスタンスの作成
クラウド上に仮想サーバーを立ち上げる作業

1. サーバーのスペックを選ぶ

2. OSの選択

3. ネットワークの設定
   VPCやサブネットを指定する

4. ストレージを選ぶ
   データを保存する場所として、EBS（Elastic Block Store）などのストレージをアタッチ

5. セキュリティを設定
   セキュリティグループを指定し、サーバーへの通信ルールを定義します。

6. キーペアの選択
   作成した秘密鍵を使って、サーバーに安全にログインします

7. タグを設定
   サーバーに名前や用途を示すタグを付け

8. インスタンスの起動
   仮想サーバーを立ち上げる

## EIPの確保とアタッチ
AWSにおける EIP（Elastic IP） とは、インターネットからアクセス可能な固定IPアドレス
これを利用することで、EC2インスタンスに対してインターネットからアクセスできる一貫したIPアドレスを割り当てることができる

## EBSストレージのアタッチ
EBS（Elastic Block Store）ストレージのアタッチとは、EBSボリューム（ストレージ）をEC2インスタンスに接続すること。これにより、EC2インスタンスがそのEBSストレージをディスクとして認識し、データの読み書きができるようになる。


## 何故、ssh -i ~/.ssh/mattermost-key.pem ec2-user@<インスタンスのEIP>でインスタンスにsshログインができるのか？

1. SSH認証鍵：-iオプションで指定されたプライベートキー（mattermost-key.pem）を使って、インスタンスに設定された対応するパブリックキーと照合することで、安全に認証が行われる

2. ec2-userというAWSが指定したデフォルトユーザー名を使用して、EC2インスタンスに接続

3. インスタンスのEIP（Elastic IP）を使って、インターネット経由でインスタンスに接続している。



